\input{Controllers}

\subsubsection{Търсене и Филтриране}

И двете действия определят вероятността за съвпадение на
серия от ключови думи, след което подбират само ресурси,
които са категоризирани към тези ключови думи. Тези
ресурси биват подредени спрямо количеството и
вероятността на търсените думи, след което само първите
N резултата биват върнати като масив от информация за
ресурси.


\subsubsection{Зареждане на класове при повикване}

Спеициализираният автозареждащ скрипт Core/autoload.php
отговаря за вмъкване и инициализация на различните
класове, използвни в приложението. Системата следва
и използва стандартът /href
    {https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-4-autoloader.md}
    {PSR-4}


\subsubsection{Рутираща система}

Рутиращата система е част от използвания фреймуърк.
Тя позволява да се зададат различни контролери на различни
точки за достъп, обработва входяща заявка и избира
най - подходящи контролер и метод.


\subsubsection{Шаблонни страници}

При отговор на заявка със Core/Responses/TemplateResponse
Контролерът избира шаблонен файл и допълнително към
стандартния HTTP Response Code подава серия от
параметри към него. Специален обработващ клас ги
поставя на съответните позиции в шаблона, което позволява
лесно автоматично генериране на съдържание и разделяне на
логическата част от интерфейса.

Допълнителна функционалност е възможността за вмъкване
на един шаблон в друг такъв или автоматичното определяне
на относителен адрес на конкретен статичен ресурс.

Тези допълнения позволяват създаването и използването на
функцията-фабрика Extend/layourResposneFactory,
която поставя общия форматиращ файл layout.html около
шаблона, който контролера желае да вмъкне.


\subsubsection{ORM функционалност}

Основна част от фреймуърка е поддръжката на ORM.
Тя позволява да се използват обекти за достъп и работа
с базата данни, което позволява да се премахне
зависимостта на програмния код от базата данни.

За това отговаря специален базов клас Core/Entity,
който използва Reflection за да позволява лесно описване
на моделите, специална функционалност в autoload.php за
да инициализира само необходимите за конкретната заявка
модели и магически методи в PHP за добавяне на нови
методи, които да предоставят лесен достъп до списъци от
свързани с конкретния обект обекти.

За всеки достъп до базата данни се използва PDO. Това
постига сигурност срещу атаки от тип SQL Injection.


\subsubsection{Защита срещу XSS}

Cross Site Scripting е атака, която включва въвеждане на
злонамерен скрипт в полета, чиито данни по-късно се
визуализират в браузъра на други потребители.

PHP включва серия от превантивни функции, които могат
да се използват за пречистване и валидация на въвеждани
и извеждани данни.


\subsubsection{Защита срещу CSRF}

Cross Site Request Forgery е хакерска техника която
използва бисквитката на потребител за да изпълнява
заявки от негово име докато той посещава уеб приложения
от трета страна.

Съвременните браузъри позволяват лесна защита срещу това
чрес SameSite свойството на бисквитките.

Класът Extend/CSRFTokenManager добавя допълнителен слой
защита използвайки Double Submit Method. Тази практика
включва добавяне на невидимо поле със специален ключ,
който се пази в отделна бисквитка и се подава със всяка
заявка. Сървърът сверява подадения ключ с този от
бисквитката и потвърждава, че заявката е направена от
уеб страница в същия сайт.

\subsubsection{Защита срещу SQL Injections}

Всички заявки минават през PHP Data Objects модула,
който имплементира специално пречистване на заявките за
конкретно избраната база данни.

Всеки достъп до базата данни се извършва от ORM
имплементацията, което премахва шансовете от успешни
SQL инжекции.

\subsubsection{Качване на файлове}

Файловете ще бъдат сканирани чрез инсталирана на сървъра
антивирусна ClamAV по време на качването им.

Ограниченията за размер са по 20MiB на ресурс и по 2MiB
на потребителски аватар, като аватарът може да бъде
преоразмерен по време на добавяне, а ресурсите могат да
бъдат компресирани с подходящ алгоритъм, за да се избегне
излишна загуба на място.

В базата данни се записват само адресите на качените
файлове. Тази техника позволява разделяне на хранилището
за файлове от сървъра с база данни, което е ценен плюс
при ефикасно хостване на приложения.

